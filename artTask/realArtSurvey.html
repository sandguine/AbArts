<!DOCTYPE html>
<html>
  <head>
    <title>ArtTask</title>
    <script src="img/v1.js"></script>
    <script src="jspsych-6.0.1/jspsych.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-image-button-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-fullscreen.js"></script>
    <link rel="stylesheet" href="jspsych-6.0.1/css/jspsych.css"></link>
  </head>
  <body></body>
  <script>

    /* create timeline */
    var timeline = [];

    timeline.push({
      type: 'fullscreen',
      fullscreen_mode: true
    });

    /* define welcome message trial */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Welcome to the experiment. Press any key to begin."
    };
    timeline.push(welcome);

    /* define instructions trial */
    // extend instructions and show example of task

    var instructions = {
      type: "html-keyboard-response",
      stimulus: "<p>In this experiment, an artwork will appear in the center " +
          "of the screen.</p><p>Follows by a series of questions related to " +
          "likeness, familiarity.</p>" +
          "<p>Press any key to begin.</p>",
      post_trial_gap: 0
    };
    timeline.push(instructions);

    /* declare necessary variables */
    var questions = [
      "<p>Are you familiar with the artist who painted this picture?</p>",
      "<p>On a scale of 1 star to 4 stars, how many star would you give to this picture?</p>"
    ]

    var familiar_options = ["Unfamiliar", "Familiar"];
    var like_options = ["0", "1", "2", "3"];
    var arts = jsPsych.timelineVariable('stimulus');
    var artShowTime = 2000
    var responsePeriod = 3000

    var showArts ={
      type: 'image-keyboard-response',
      stimulus: arts,
      trial_duration: artShowTime,
      response_ends_trial: false
    }

    var qFamiliar = {
      type: 'image-button-response',
      stimulus: arts,
      trial_duration: responsePeriod,
      response_ends_trial: true,
      choices: familiar_options //[, familiar_options, human_options]
    }

    var qLike = {
      type: 'image-button-response',
      stimulus: arts,
      trial_duration: responsePeriod,
      response_ends_trial: true,
      choices: like_options //[, familiar_options, human_options]
    }

    var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      trial_duration: function(){
        return jsPsych.randomization.sampleWithoutReplacement([250, 500, 750, 1000], 1)[0];
      },
      data: {test_part: 'fixation'}
    }

    // write a pause between trial function
    var pausePeriod = {
      type: "html-keyboard-response",
      stimulus: "<p>The new set of questions is about to start.</p>" +
          "<p>Press any key to begin.</p>",
      post_trial_gap: 0
    }

    var familiarInstructions = {
      type: 'html-keyboard-response',
      stimulus: "<p>For the following set of arts, you will be answering the following question. </br> </p>" +
      "<p>\"Are you familiar with the artist who painted this picture?\" </br> </p>" +
      "<p>Press any key to begin.</p>"
    }
    timeline.push(familiarInstructions)

    var testFamiliar = {
      timeline: [fixation, showArts, qFamiliar],
      timeline_variables: test_stimuli,
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(testFamiliar);
    timeline.push(pausePeriod);

    var likeInstructions = {
      type: 'html-keyboard-response',
      stimulus: "<p>For the following set of arts, you will be answering the following question. </br> </p>" +
      "<p>\"On a scale of 0 to 3 where 0 means \'Not at all\' and 3 means \'Strongly\', how much do you like the artwork shown?\" </br> </p>" +
      "<p>Press any key to begin.</p>"
    }
    timeline.push(likeInstructions)

    var testLike = {
      timeline: [fixation, showArts, qLike],
      timeline_variables: test_stimuli,
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(testLike);
    timeline.push(pausePeriod);

    /* start the experiment */
    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

  </script>
</html>
