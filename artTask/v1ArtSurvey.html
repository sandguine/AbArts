<!DOCTYPE html>
<html>
  <head>
    <title>ArtTask</title>
    <script src="jspsych-6.0.1/jspsych.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-image-keyboard-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-image-button-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-fullscreen.js"></script>
    <link rel="stylesheet" href="jspsych-6.0.1/css/jspsych.css"></link>
  </head>
  <body></body>
  <script>

    /* create timeline */
    var timeline = [];

    timeline.push({
      type: 'fullscreen',
      fullscreen_mode: true
    });

    /* define welcome message trial */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Welcome to the experiment. Press any key to begin."
    };
    timeline.push(welcome);

    /* define instructions trial */
    var instructions = {
      type: "html-keyboard-response",
      stimulus: "<p>In this experiment, an artwork will appear in the center " +
          "of the screen.</p><p>Follows by a series of questions related to " +
          "likeness, familiarity, and visual object seen.</p>" +
          "<p>Press any key to begin.</p>",
      post_trial_gap: 0
    };
    timeline.push(instructions);

    var questions = ["<p>How do you like this picture?</p>", "<p>Are you familiar with the artist of this picture?</p>", "<p>Do you see human in this picture?</p>"]

    var like_options = ["Strongly Dislike", "Dislike", "Somewhat Dislike", "Somewhat Like", "Like", "Strongly Like"];
    var familiar_options = ["Strongly Not-familiar", "Not-familiar", "Somewhat Not-familiar", "Somewhat Familiar", "Familiar", "Strongly Familiar"];
    var human_options = ["Strongly Not-human", "Not-human", "Somewhat Not-human", "Somewhat Human", "Human", "Strongly Human"];

    var imgs = []

    for (i = 0; i < 100; i++){
      imgs.push('img/'+ i + '.jpg');
    }

    for (i = 0; i < imgs.length; i++) {
      //text += imgs[i] + "<br>";
      var fixation = {
        type: 'html-keyboard-response',
        stimulus: '<div style="font-size:60px;">+</div>',
        choices: jsPsych.NO_KEYS,
        trial_duration: function(){
          return jsPsych.randomization.sampleWithoutReplacement([250, 500, 750, 1000], 1)[0];
        },
        data: {test_part: 'fixation'}
      };
      timeline.push(fixation);

      var qLike = {
        type: 'image-button-response',
        stimulus: imgs[i],
        choices: like_options,
        trial_duration: 4000,
        response_ends_trial: true,
        prompt: questions[0]
      };
      timeline.push(qLike);

      var qFamiliar = {
        type: 'image-button-response',
        stimulus: imgs[i],
        choices: familiar_options,
        trial_duration: 4000,
        response_ends_trial: true,
        prompt: questions[1]
      };
      timeline.push(qFamiliar);

      var qHuman = {
        type: 'image-button-response',
        stimulus: imgs[i],
        choices: human_options,
        trial_duration: 4000,
        response_ends_trial: true,
        prompt: questions[2]
      };
      timeline.push(qHuman);

    }

    /* start the experiment */
    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

  </script>
</html>
