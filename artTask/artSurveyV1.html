<!DOCTYPE html>
<html>
  <head>
    <title>ArtTask</title>
    <script src="img/v5.js"></script>
    <script src="jspsych-6.0.1/jspsych.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-survey-text.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-survey-multi-choice.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-survey-multi-select.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-html-button-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-html-keyboard-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-image-button-response.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-instructions.js"></script>
    <script src="jspsych-6.0.1/plugins/jspsych-fullscreen.js"></script>
    <link rel="stylesheet" href="jspsych-6.0.1/css/jspsych.css"></link>
  </head>
  <body></body>
  <script>

    /* create timeline */
    var timeline = [];

    timeline.push({
      type: 'fullscreen',
      fullscreen_mode: true
    });

    /* declare necessary variables */
    var questions = [
      "<p>Do you know the name of the artist who painted this picture?</p>",
      "<p>How much do you like the artwork shown? </br> 0 = \'Not at all\', and 3 = \'Strongly Like\'\" </br> </p>"
    ]

    var familiar_options = ["I don't know.", "I know."];
    var like_options = ["0", "1", "2", "3"];
    var arts = jsPsych.timelineVariable('stimulus');
    var artShowTime = 2//000
    var responsePeriodArtist = 3//000
    var responsePeriodLike = 6//000
    var fixationTime = 5//00

    var showArtsFam ={
      type: 'image-button-response',
      stimulus: arts,
      trial_duration: artShowTime,
      response_ends_trial: false,
      prompt: questions[0]
    }

    var showArtsLike ={
      type: 'image-button-response',
      stimulus: arts,
      trial_duration: artShowTime,
      response_ends_trial: false,
      prompt: questions[1]
    }

    var qFamiliar = {
      type: 'image-button-response',
      stimulus: arts,
      prompt: questions[0],
      trial_duration: responsePeriodArtist,
      response_ends_trial: true,
      choices: familiar_options //[, familiar_options, human_options]
    }

    var qLike = {
      type: 'image-button-response',
      stimulus: arts,
      prompt: questions[1],
      trial_duration: responsePeriodLike,
      response_ends_trial: true,
      choices: like_options //[, familiar_options, human_options]
    }

    var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      trial_duration: function(){
        return jsPsych.randomization.sampleWithoutReplacement([fixationTime], 1)[0];
      },
      data: {test_part: 'fixation'},
      response_ends_trial: false
    }

    // write a pause between trial function
    var pausePeriod = {
      type: "html-button-response",
      stimulus: "<p>The new set of questions is about to start.</p>" +
          "<p>Click on the button below to begin.</p>",
      post_trial_gap: 0,
      choices: ["Next \>"],
      response_ends_trial: true
    }

    // example shows here
    var showArtsEx1 ={
      type: 'image-button-response',
      stimulus: 'img/0.jpg',
      trial_duration: artShowTime,
      response_ends_trial: false,
      prompt: questions[0]
    }

    var qFamEx = {
      type: 'image-button-response',
      stimulus: 'img/0.jpg',
      prompt: questions[0],
      trial_duration: responsePeriodArtist,
      response_ends_trial: true,
      choices: familiar_options //[, familiar_options, human_options]
    }

    var qLikeEx = {
      type: 'image-button-response',
      stimulus: 'img/0.jpg',
      prompt: questions[1],
      trial_duration: responsePeriodLike,
      response_ends_trial: true,
      choices: like_options //[, familiar_options, human_options]
    }

    var beginRealSurvey ={
      type: "html-button-response",
      stimulus: "<p>Ok, very simple, right?</p>" +
          "<p>Click on the button below to begin the real survey.</p>",
          post_trial_gap: 0,
          choices: ["Next \>"],
          response_ends_trial: true
        }

    var welcome = {
      type: 'instructions',
      pages: [
          "<p>Welcome to our easy and simple survey!</p>",
          "<p>In this survey, you will see various paintings created by different artists.</p>" +
          "<p>We will ask you a few simple questions about the artwork.</p>",
          "<p>You will recieve <b>$3</b> when you complete the task regardless of your responses.</p>" +
          "<p><b>This is not a test of your knowledge, so please answer as honestly as you can.</b></p>",
          "<p>Ok, let's do an example together.</p>",
          "<p>You will see a <b>\"+\"</b> at the beginning of each round.</p>",
          "<p>A painting will appear at the center of the screen.</p>" +
          "<p>You have <b>2 seconds</b> to look at the painting.</p>"
      ],
      show_clickable_nav: true,
      allow_backward: true
    };
    timeline.push(welcome);

    var afterFamExpInstr = {
      type: 'instructions',
      pages: [
          "<p>You can click on one of the two options that will appear at the bottom of the screen.</p>",
          "<p>If you think you <b>DO NOT KNOW</b> the name of the artist, please click <b>\"I don't know\"</b>.</p>",
          "<p>If you think you <b>KNOW</b> the name of the artist, please click <b>\"I know\"</b>.</p>",
          "<p>You have <b>3 seconds</b> to respond.</p>"
      ],
      show_clickable_nav: true,
      allow_backward: true
    };


    var showExample = {
      timeline: [fixation, showArtsEx1, afterFamExpInstr, qFamEx, beginRealSurvey],
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(showExample)

    var familiarInstructions = {
      type: 'html-button-response',
      stimulus: "<p>In this part of survey, we ask you to answer the following question.</br></p>" +
      "<p><b>\"Do you know the name of the artist who painted this picture?\"</b></br></p>" +
      "<p>Click on the button below to begin.</p>",
      post_trial_gap: 0,
      choices: ["Next \>"],
      response_ends_trial: true
    }
    timeline.push(familiarInstructions)

    var testFamiliar = {
      timeline: [fixation, showArtsFam, qFamiliar],
      timeline_variables: test_stimuli,
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(testFamiliar);
    timeline.push(pausePeriod);

    var likeExpInstr = {
      type: 'instructions',
      pages: [
          "<p>Ok, let's do another example together.</p>",
          "<p>You will see a <b>\"+\"</b> at the beginning of each round.</p>",
          "<p>A painting will appear at the center of the screen.</p>" +
          "<p>You have <b>2 seconds</b> to look at the painting.</p>",
          "<p>You can click on one of the four options that will appear at the bottom of the screen.</p>",
          "<p>If you <b>DO NOT LIKE</b> the painting <b>AT ALL</b>, please click on the option <b>\"0\"</b>.</p>",
          "<p>If you <b>LIKE</b> the painting <b>A LITTLE</b>, please click on the option <b>\"1\"</b>.</p>",
          "<p>If you <b>LIKE</b> the painting, please click on the option <b>\"2\"</b>.</p>",
          "<p>If you <b>STRONGLY LIKE</b> the painting, please click on the option <b>\"3\"</b>.</p>",
          "<p>You have <b>6 seconds</b> to respond.</p>",
      ],
      show_clickable_nav: true,
      allow_backward: true
    };

    var likeExample = {
      timeline: [likeExpInstr, fixation, qLikeEx, beginRealSurvey],
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(likeExample);

    var likeInstructions = {
      type: 'html-button-response',
      stimulus: "<p>In this part of survey, we ask you to answer the following question.</br></p>" +
      "<p>\"How much do you like the artwork shown? </br> </p>"+
      "0 = \'Not at all\', 1 = \'Like a little\', 2 = \'Like\', and 3 = \'Strongly Like\'.\"</br></p>" +
      "<p>Click on the button below to begin.</p>",
      post_trial_gap: 0,
      choices: ["Next \>"],
      response_ends_trial: true
    }
    timeline.push(likeInstructions)

    var testLike = {
      timeline: [fixation, showArtsLike, qLike],
      timeline_variables: test_stimuli,
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(testLike);

    var surveyIntro = {
      type: "html-button-response",
      stimulus: "<p>You are almost done!</p>" +
            "<p>Please answer a few more questions.</p>" +
            "<p>Click on the button below to begin.</p>",
      post_trial_gap: 0,
      choices: ["Next \>"],
      response_ends_trial: true

    }
    timeline.push(surveyIntro);

    var yesNo = ["Yes", "No", "Prefer not to answer"];
    var ageRange = ["18 to 24 years old", "25 to 34 years old", "35 to 44 years old", "45 years old or above", "Prefer not to answer"];
    var genders = ["Female", "Male", "Prefer not to answer"];
    var degrees = ["Did not complete High School", "High School/GED", "Some College or Associate Degree",
                  "Bachelor's Degree", "Master's Degree or higher", "Prefer not to answer"]
    var artMuseum = ["Less than once a month", "1 to 3 times per month", "Once a week or more", "Prefer not to answer"]
    var races = ["American Indian or Alaska Native", "Asian or Asian American", "Black or African American",
                "Native Hawaiian and Other Pacific Islander", "White or Caucasian", "Prefer not to answer"]

    var postSurveyQ = ["How old are you?", "What's your gender?", "Do you have a degree in fine arts or art history?",
                    "Please select the highest degree you have earned?", "How often do you visit art museums?"]

    var ageQ = {
      type: 'survey-multi-choice',
      questions: [{prompt: postSurveyQ[0], options: ageRange, required: true}]
    }

    var genderQ = {
      type: 'survey-multi-choice',
      questions: [{prompt: postSurveyQ[1], options: genders, required: true}]
    }

    var artHistQ = {
      type: 'survey-multi-choice',
      questions: [{prompt: postSurveyQ[2], options: yesNo, required: true}]
    }

    var degreeQ = {
      type: 'survey-multi-choice',
      questions: [{prompt: postSurveyQ[3], options: degrees, required: true}]
    }

    var artMuseumQ = {
      type: 'survey-multi-choice',
      questions: [{prompt: postSurveyQ[4], options: artMuseum, required: true}]
    }

    var raceQ = {
      type: 'survey-multi-select',
      questions: [{prompt: "Which ethnicity or ethnicities do you identify yourself as?", options: races, required: true}]
    }

    var testSurvey = {
      timeline: [ageQ, genderQ, raceQ, degreeQ, artHistQ, artMuseumQ],
      repetitions: 0,
      randomize_order: true
    }
    timeline.push(testSurvey);

    var suggestionsBox = {
      type: 'survey-text',
      questions: [{prompt: "Do you have any suggestion or question regarding our task? Please type them down in the box below.", rows: 5, columns: 100}],
    };
    timeline.push(suggestionsBox);

    /* start the survey */
    jsPsych.init({
      timeline: timeline,
      on_finish: function() {
        jsPsych.data.displayData();
      }
    });

  </script>
</html>
